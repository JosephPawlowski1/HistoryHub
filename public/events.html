<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>HistoryHub</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="css/modern-business.css" rel="stylesheet">

</head>

<body onload="setup()">

  <!-- Navigation -->
  <!-- Navigation -->
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">

      <a class="navbar-brand" href="index.html">History Hub</a>

      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive"
        aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="about.html">About</a>
          </li>
          
          <li class="nav-item">
            <a class="nav-link" href="class.html">Classes</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="events.html">Events</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="blog-home-1.html">Blog</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="portfolio-1-col.html">Professors</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownBlog" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false">
              Learn More
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownBlog">
              <a class="dropdown-item" href="faq.html">FAQ</a>
              <a class="dropdown-item" href="404.html">404</a>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Page Content -->
  <div class="container">

    <!-- Page Heading/Breadcrumbs -->
    <h1 class="mt-4 mb-3">Event
      <small></small>
    </h1>

    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a href="index.html">Home</a>
      </li>
      <li class="breadcrumb-item active">Event</li>
    </ol>

    <!-- Image Header -->
    <img class="img-fluid rounded mb-4" src="http://placehold.it/1200x200" alt="">

    <!-- Marketing Icons Section -->
    <div id="card-container" class="row">




    </div>
    <a id="createAnEvent" href="#" class="btn btn-primary">Create an Event</a>
    <!--row -->

  </div>

  <!-- /.container -->

  <!-- Footer -->
  <footer class="py-5 bg-dark">
    <div class="container">
      <p class="m-0 text-center text-white">Copyright &copy; History Hub 2019</p>
    </div>
    <!-- /.container -->
  </footer>

  <!-- Bootstrap core JavaScript -->
  <script src="https://www.gstatic.com/firebasejs/3.5.2/firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.5.0/firebase-analytics.js"></script>
  <script>
    var eventKey;
    var keys;
    function setup() {
      //alert("hello")
      const firebaseConfig = {
        apiKey: "AIzaSyA7zxrx4StJObT7CfXMsCzKGCpbfSKnOZs",
        authDomain: "historyunited-61508.firebaseapp.com",
        databaseURL: "https://historyunited-61508.firebaseio.com",
        projectId: "historyunited-61508",
        storageBucket: "historyunited-61508.appspot.com",
        messagingSenderId: "752721294693",
        appId: "1:752721294693:web:116701c67ce46f49859d8c",
        measurementId: "G-5GP36786WK"
      };
      // alert("before firebase intitalizeApp")
      if (!firebase.apps.length) {
        //alert("in if statement")
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
      }
      // alert("after firevase intitalizeApp")
      firebase.analytics();
      //alert("firebase refereance")
      var dbRef3 = firebase.database();
      //var eventsRef3 = dbRef3.ref('events');
      //  alert("before database ref")
      var eventsGetRef = dbRef3.ref("events");
      //  alert("after database ref");
      // alert("before firebase get")
      eventsGetRef.on("value", gotData);
      // alert("after firebase get")


      var eventObjs = [];
      function gotData(data) {
        // initaialize events
        //var eventOneHeader = document.getElementById("eventOneHeader");
        // var eventOneBody = document.getElementById("eventOneBody");
        // var eventTwoHeader = document.getElementById("eventTwoHeader");
        // var eventTwoBody = document.getElementById("eventTwoBody");
        //var eventThreeHeader = document.getElementById("eventThreeHeader");
        //var eventThreeBody = document.getElementById("eventThreeBody");


        // alert("in gotData fuction")
        var events = data.val();
        keys = Object.keys(events);
        sessionStorage.setItem("keys", keys);

        for (var i = 0; i < keys.length; i++) {
          var key = keys[i];
          //alert(key);
          var event = events[key];
          //alert(event.name);
          var eventObj = {
            "name": event.name,
            "time": event.time,
            "location": event.location,
            "description": event.description
          };
          //alert(eventObj.name);
          eventObjs.push(eventObj);
        }


        //eventOneHeader.innerHTML = events[keys[0]].name;
        //eventOneBody.innerHTML = events[keys[0]].location + events[keys[0]].time;
        //eventTwoHeader.innerHTML = events[keys[1]].name;
        //eventTwoBody.innerHTML = events[keys[1]].location + events[keys[1]].time;
        //eventThreeHeader.innerHTML = events[keys[2]].name;
        //eventThreeBody.innerHTML = events[keys[2]].location + events[keys[2]].time;
        // }
        sessionStorage.setItem("key1", keys[0]);
        sessionStorage.setItem("key2", keys[1]);
        sessionStorage.setItem("key3", keys[2]);
        // alert(eventObjs.length);
        //for (var i = 0; i < eventObjs.length; i++) {
        //alert(eventObjs[i].name);
        // }
        let cardContainer;
        var counter = 0;
        let createTaskCard = (eventObjs) => {

          //alert(eventObjs);    
          let card = document.createElement('div');
          card.className = 'col-lg-4 mb-4';

          let cardHeader = document.createElement('div');
          cardHeader.className = 'card h-100';

          let cardHeaderInner = document.createElement('h4');
          cardHeaderInner.className = 'card-header'
          cardHeaderInner.innerHTML = eventObjs.name;


          let cardBody = document.createElement('div');
          cardBody.className = 'card-body';

          let cardBodyInner = document.createElement('p');
          cardBodyInner.className = 'card-text';
          cardBodyInner.innerHTML = "Location: " + eventObjs.location;

          let cardBodyInner2 = document.createElement('p');
          cardBodyInner2.className = 'card-text';
          cardBodyInner2.innerHTML = "Time: " + eventObjs.time;


          let cardFooter = document.createElement('div');
          cardFooter.className = 'card-footer';

          let cardFooterInner = document.createElement('a');
          cardFooterInner.id = counter;
          cardFooterInner.className = 'btn btn-primary';
          cardFooterInner.innerHTML = 'Learn More';
          cardFooterInner.href = '#';



          //let title = document.createElement('h5');
          //title.innerText = task.title;
          //title.className = 'card-title';

          //let color = document.createElement('div');
          //color.innerText = task.color;
          //color.className = 'card-color';


          //cardBody.appendChild(title);
          //cardBody.appendChild(color);
          //card.appendChild(cardBody);

          cardHeader.appendChild(cardHeaderInner);
          cardBodyInner.appendChild(cardBodyInner2);
          cardBody.appendChild(cardBodyInner);
          cardFooter.appendChild(cardFooterInner);
          cardHeader.appendChild(cardBody);
          cardHeader.appendChild(cardFooter);
          card.appendChild(cardHeader);
          cardContainer.appendChild(card);
          counter++

        }

        let initListOfTasks = () => {
          if (cardContainer) {
            document.getElementById('card-container').replaceWith(cardContainer);
            return;
          }

          cardContainer = document.getElementById('card-container');
          eventObjs.forEach((eventObjs) => {
            createTaskCard(eventObjs);
          });
        };

        initListOfTasks();
      }

      /*   
       
       var tasks = [{
           "title": "home",
           "color": "blue",
       },
       {
           "title": "city",
           "color": "green",
       },
     {
       "title":"town",
       "color":"red",
     }
   ];
   
   let cardContainer;
   var counter = 1;
   let createTaskCard = (task) => {
   
     //alert(eventObjs);    
       let card = document.createElement('div');
       card.className = 'col-lg-4 mb-4';
   
       let cardHeader = document.createElement('div');
       cardHeader.className = 'card h-100';
       
       let cardHeaderInner = document.createElement('h4');
       cardHeaderInner.className = 'card-header'
       cardHeaderInner.innerHTML = task.title;
       
   
       let cardBody = document.createElement('div');
       cardBody.className = 'card-body';
   
       let cardBodyInner = document.createElement('p');
       cardBodyInner.className = 'card-text';
       cardBodyInner.innerHTML = task.color;
   
       let cardFooter = document.createElement('div');
       cardFooter.className = 'card-footer';
   
       let cardFooterInner = document.createElement('a');
       cardFooterInner.id = counter;
       cardFooterInner.className = 'btn btn-primary';
       cardFooterInner.innerHTML = 'Learn More';
       cardFooterInner.href ='#';
      
   
   
       //let title = document.createElement('h5');
       //title.innerText = task.title;
       //title.className = 'card-title';
   
       //let color = document.createElement('div');
       //color.innerText = task.color;
       //color.className = 'card-color';
   
   
       //cardBody.appendChild(title);
       //cardBody.appendChild(color);
       //card.appendChild(cardBody);
   
       cardHeader.appendChild(cardHeaderInner);
       cardBody.appendChild(cardBodyInner);
       cardFooter.appendChild(cardFooterInner);
       cardHeader.appendChild(cardBody);
       cardHeader.appendChild(cardFooter);
       card.appendChild(cardHeader);
       cardContainer.appendChild(card);
     counter++
   
      }

   let initListOfTasks = () => {
       if (cardContainer) {
           document.getElementById('card-container').replaceWith(cardContainer);
           return;
       }

       cardContainer = document.getElementById('card-container');
       tasks.forEach((task) => {
           createTaskCard(task);
       });
   };

   initListOfTasks();
   */
    }
  </script>
  <script>
  </script>
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="js/createAnEvent.js"></script>
  <script src="js/learnMore.js"></script>





</body>

</html>